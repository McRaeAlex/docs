



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-2.9.0">
    
    
      
        <title>Systems - illumos</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.23c5c491.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.0c1f321e.js"></script>
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#debugging-broken-systems" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="" title="illumos" class="md-header-nav__button md-logo">
          
            <img src="../../assets/images/illumos.svg">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
        
          <div class="md-flex__cell md-flex__cell--shrink">
            <div class="md-header-nav__source">
              


  


  <a href="https://github.com/illumos/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      illumos/docs
    </div>
  </a>

            </div>
          </div>
        
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../assets/images/illumos.svg">
      
    </span>
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/illumos/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      illumos/docs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/" title="What is illumos?" class="md-nav__link">
      What is illumos?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/who/" title="Who uses illumos?" class="md-nav__link">
      Who uses illumos?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/features/" title="Features" class="md-nav__link">
      Features
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/distro/" title="Distributions" class="md-nav__link">
      Distributions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/leadership/" title="Leadership" class="md-nav__link">
      Leadership
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/logo/" title="Logo" class="md-nav__link">
      Logo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../flagdays/" title="Flag Days" class="md-nav__link">
      Flag Days
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      History
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        History
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/history/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/announcement/" title="Announcement" class="md-nav__link">
      Announcement
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bugs/" title="Bug Reporting" class="md-nav__link">
      Bug Reporting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../books/" title="Books" class="md-nav__link">
      Books
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../manual/" title="Manual Pages" class="md-nav__link">
      Manual Pages
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5" type="checkbox" id="nav-6-5" checked>
    
    <label class="md-nav__link" for="nav-6-5">
      Debugging
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-5">
        Debugging
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../debug/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Systems
      </label>
    
    <a href="./" title="Systems" class="md-nav__link md-nav__link--active">
      Systems
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#help-my-system-crashed-or-locked-up" title="Help! My System Crashed or Locked Up!" class="md-nav__link">
    Help! My System Crashed or Locked Up!
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gathering-information-from-a-crash-dump" title="Gathering Information from a Crash Dump" class="md-nav__link">
    Gathering Information from a Crash Dump
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes" title="Notes" class="md-nav__link">
    Notes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ensuring-a-successful-crash-dump" title="Ensuring a successful crash dump" class="md-nav__link">
    Ensuring a successful crash dump
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcing-a-crash-dump" title="Forcing a crash dump." class="md-nav__link">
    Forcing a crash dump.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gathering-information-from-a-running-system" title="Gathering Information from a Running System" class="md-nav__link">
    Gathering Information from a Running System
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enabling-verbose-boot-messages-and-the-kernel-debugger-kmdb-on-x86" title="Enabling verbose boot messages and the kernel debugger (kmdb) on x86" class="md-nav__link">
    Enabling verbose boot messages and the kernel debugger (kmdb) on x86
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-verbose-boot-messages-and-the-kernel-debugger-kmdb-on-sparc" title="Enabling verbose boot messages and the kernel debugger (kmdb) on SPARC:" class="md-nav__link">
    Enabling verbose boot messages and the kernel debugger (kmdb) on SPARC:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-both-platforms" title="On both platforms" class="md-nav__link">
    On both platforms
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gathering-information-from-a-running-system-using-only-nmi-x86" title="Gathering Information from a Running System, Using only NMI (x86)" class="md-nav__link">
    Gathering Information from a Running System, Using only NMI (x86)
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../debug-apps/" title="Applications" class="md-nav__link">
      Applications
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/build-illumos/" title="Building illumos" class="md-nav__link">
      Building illumos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/build-times/" title="Build times" class="md-nav__link">
      Build times
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/build-components/" title="Building Components" class="md-nav__link">
      Building Components
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/build-datasets/" title="Build Datasets" class="md-nav__link">
      Build Datasets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/workspaces/" title="Multiple Workspaces" class="md-nav__link">
      Multiple Workspaces
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/multibug/" title="Working Multiple Bugs" class="md-nav__link">
      Working Multiple Bugs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/studio/" title="Building with Sun Studio" class="md-nav__link">
      Building with Sun Studio
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/comp-webrev/" title="Comparing with webrev" class="md-nav__link">
      Comparing with webrev
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Contributing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Contributing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/quality/" title="On Quality" class="md-nav__link">
      On Quality
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/qds/" title="Quality Death Spiral" class="md-nav__link">
      Quality Death Spiral
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/docs/" title="Documentation" class="md-nav__link">
      Documentation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Community
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Community
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/lists/" title="Mailing Lists" class="md-nav__link">
      Mailing Lists
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/events/" title="Events" class="md-nav__link">
      Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/videos/" title="Videos" class="md-nav__link">
      Videos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-5" type="checkbox" id="nav-9-5">
    
    <label class="md-nav__link" for="nav-9-5">
      Google Summer of Code
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-5">
        Google Summer of Code
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc-application/" title="Student Application" class="md-nav__link">
      Student Application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc-expectations/" title="Student Expectations" class="md-nav__link">
      Student Expectations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc-proposal/" title="Writing a Proposal" class="md-nav__link">
      Writing a Proposal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc-mentor/" title="Becoming a Mentor" class="md-nav__link">
      Becoming a Mentor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc-mentor-application/" title="Mentoring Application" class="md-nav__link">
      Mentoring Application
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../projects/" title="Projects" class="md-nav__link">
      Projects
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#help-my-system-crashed-or-locked-up" title="Help! My System Crashed or Locked Up!" class="md-nav__link">
    Help! My System Crashed or Locked Up!
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gathering-information-from-a-crash-dump" title="Gathering Information from a Crash Dump" class="md-nav__link">
    Gathering Information from a Crash Dump
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes" title="Notes" class="md-nav__link">
    Notes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ensuring-a-successful-crash-dump" title="Ensuring a successful crash dump" class="md-nav__link">
    Ensuring a successful crash dump
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forcing-a-crash-dump" title="Forcing a crash dump." class="md-nav__link">
    Forcing a crash dump.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gathering-information-from-a-running-system" title="Gathering Information from a Running System" class="md-nav__link">
    Gathering Information from a Running System
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enabling-verbose-boot-messages-and-the-kernel-debugger-kmdb-on-x86" title="Enabling verbose boot messages and the kernel debugger (kmdb) on x86" class="md-nav__link">
    Enabling verbose boot messages and the kernel debugger (kmdb) on x86
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-verbose-boot-messages-and-the-kernel-debugger-kmdb-on-sparc" title="Enabling verbose boot messages and the kernel debugger (kmdb) on SPARC:" class="md-nav__link">
    Enabling verbose boot messages and the kernel debugger (kmdb) on SPARC:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-both-platforms" title="On both platforms" class="md-nav__link">
    On both platforms
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gathering-information-from-a-running-system-using-only-nmi-x86" title="Gathering Information from a Running System, Using only NMI (x86)" class="md-nav__link">
    Gathering Information from a Running System, Using only NMI (x86)
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/illumos/docs/edit/master/docs/user-guide/debug-systems.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <div class="admonition warning">
<p class="admonition-title">Requires Review</p>
<p>This page contains incomplete content and needs to be reviewed.</p>
</div>
<h1 id="debugging-broken-systems">Debugging broken systems<a class="headerlink" href="#debugging-broken-systems" title="Permanent link">&para;</a></h1>
<p>This page is intended to help users of operating systems derived from the
illumos gate to bring problems to the attention of the illumos gate developers.</p>
<div class="admonition note">
<p>All commands in this guide is presumed to be run as a non-privileged
user. pfexec will be prepended to commands which need additional privileges. On
some systems, the sudo command is used for this purpose.</p>
</div>
<h2 id="help-my-system-crashed-or-locked-up">Help! My System Crashed or Locked Up!<a class="headerlink" href="#help-my-system-crashed-or-locked-up" title="Permanent link">&para;</a></h2>
<p>You might be reading this because your system suddenly printed a panic message
on the console, saved a crash dump, and then rebooted (or the popular
alternative: suddenly locked up, showed some disk activity, and then rebooted).
Or perhaps your system stopped responding and never recovered. Calm down. We
want to know about this problem.</p>
<p>When illumos crashes (kernel panics), a crash dump is automatically saved
containing information from kernel memory. This can be copied to a file. A
developer can use use the crash dump to inspect the state of the system at the
time of the crash. You can also generate a crash dump manually to debug a hang.</p>
<p>If you are on a live session where no storage is available, you may have to
manually copy down crash or hang information. A serial console is preferred for
this.</p>
<h3 id="gathering-information-from-a-crash-dump">Gathering Information from a Crash Dump<a class="headerlink" href="#gathering-information-from-a-crash-dump" title="Permanent link">&para;</a></h3>
<p>If you are on an installed system and a crash occurs, a crash dump will
normally be saved. If you are on a live system, skip to the next section.
Assuming the crash does not recur immediately after the reboot, you can
retrieve information from the crash dump by following these instructions.</p>
<p>Log in as a user with access to pfexec or sudo (typically the user you created
at install)</p>
<p>Check your crash dump configuration:
<div class="codehilite"><pre><span></span>pfexec dumpadm
</pre></div></p>
<p>This should print something like:</p>
<div class="codehilite"><pre><span></span>      Dump content: kernel pages
       Dump device: /dev/zvol/dsk/rpool/dump (dedicated)
Savecore directory: /var/crash/kirin
  Savecore enabled: no
   Save compressed: on
</pre></div>

<p>To extract the crash dump from the dump volume:</p>
<div class="codehilite"><pre><span></span>pfexec mkdir -p /var/crash/`hostname`
pfexec savecore
cd /var/crash/`hostname`
pfexec savecore -vf vmdump.0
</pre></div>

<p>With the crash dump extracted, you can now copy the kernel messages and stack
information from the crash to a file:</p>
<div class="codehilite"><pre><span></span>echo &#39;::panicinfo\n::cpuinfo -v\n::threadlist -v 10\n::msgbuf\n*panic_thread::findstack -v\n::stacks&#39; | mdb 0 &gt; ~/crash.0
</pre></div>

<p>Save the crash.0 file in your home directory for reporting the crash. If
possible, keep the crash dump files on hand for future examination. If you have
available bandwidth and disk space, making this full crash dump accessible to
developers is invaluable. Note that due to the nature of the dump, it may
contain information you consider confidential. Use your judgment when making
it generally available.</p>
<h3 id="notes">Notes<a class="headerlink" href="#notes" title="Permanent link">&para;</a></h3>
<p>Configuring your crash dump.  The commands "dumpadm" and "coreadm" and be used
to list and alter the location and/or the actual contents of the resulting
crash dump.</p>
<h4 id="ensuring-a-successful-crash-dump">Ensuring a successful crash dump<a class="headerlink" href="#ensuring-a-successful-crash-dump" title="Permanent link">&para;</a></h4>
<p>If you do not see a line like "100% done   .... dump succeeded" on the console
(if you have a console) or when you later try to analyze your crash dump via
"savecore -vd" or "savecore" you see a message like "savecore: bad magic number
0". You are probably are hitting illumos Bug #1110 and Bug #1369 (disable
multi-threaded dump). In this case in order to successfully force a crash dump
(if you do not see "dump succeeded")  you should modify your system to perform
a non-threaded crash dump by adding the following line to your /etc/system file
"set dump_plat_mincpu=0" and then performing a reconfiguration reboot.</p>
<h4 id="forcing-a-crash-dump">Forcing a crash dump.<a class="headerlink" href="#forcing-a-crash-dump" title="Permanent link">&para;</a></h4>
<p>In order to force a crash dump form a working system that still has interactive capabilities you can do one of the following:</p>
<ul>
<li>as below "Gathering Information from a Running System".</li>
<li>as below "Gathering Information from a Running System, using only NMI (x86)".</li>
<li>issue the command "savecore -L" from the command line, this is not be the "best" method for debugging an issue.</li>
<li>issue the command "reboot -d", this is not be the "best" method for debugging an issue.</li>
</ul>
<h2 id="gathering-information-from-a-running-system">Gathering Information from a Running System<a class="headerlink" href="#gathering-information-from-a-running-system" title="Permanent link">&para;</a></h2>
<p>If you can reproduce the hang or crash, enabling the kernel debugger beforehand
is a way to get valuable information about it. The best option, if problem
occurs after the system has access to storage, is to use the debugger to save a
crash dump. Otherwise, you should record as much diagnostic information as
possible from the debugger.. A serial console or some form of lights-out
management (LOM) functionality is preferred for interacting with the debugger.</p>
<p>To use a serial console, you need an onboard or USB serial port, a null modem
cable, and another computer with a serial port, and to boot with the
appropriate -B console=ttya or similar option.</p>
<p>For a local console, you need a monitor and keyboard. On x86, this must be a
PS/2 keyboard or a USB keyboard operating in USB legacy (PS/2 emulation) mode.</p>
<h3 id="enabling-verbose-boot-messages-and-the-kernel-debugger-kmdb-on-x86">Enabling verbose boot messages and the kernel debugger (kmdb) on x86<a class="headerlink" href="#enabling-verbose-boot-messages-and-the-kernel-debugger-kmdb-on-x86" title="Permanent link">&para;</a></h3>
<ul>
<li>At the GRUB prompt, highlight the boot environment with the arrow keys and press 'e' to edit the commands.</li>
<li>Highlight the splashimage line, if it exists, and press 'd' to delete.</li>
<li>Highlight the kernel line and press 'e' to edit.</li>
<li>Append -kvd -m verbose to the end of the line (and remove console=graphics if it appears after -B)</li>
<li>Press 'Enter' when finished, and then press 'b' to boot.</li>
</ul>
<h3 id="enabling-verbose-boot-messages-and-the-kernel-debugger-kmdb-on-sparc">Enabling verbose boot messages and the kernel debugger (kmdb) on SPARC:<a class="headerlink" href="#enabling-verbose-boot-messages-and-the-kernel-debugger-kmdb-on-sparc" title="Permanent link">&para;</a></h3>
<ul>
<li>Press 'Stop' ('L1'), then 'A' or send a BREAK on the serial line to interrupt the boot process, if necessary.</li>
<li>At the ok prompt, type boot -kvd -m verbose and press 'Enter'.</li>
</ul>
<h3 id="on-both-platforms">On both platforms<a class="headerlink" href="#on-both-platforms" title="Permanent link">&para;</a></h3>
<ul>
<li>Wait for the kmdb&gt; prompt to appear, then type moddebug/W 80000000 and press 'Enter'.</li>
<li>Type snooping/W 1 and press 'Enter'.</li>
<li>Type :c and press 'Enter'.</li>
</ul>
<p>If the system panics, copy down <code>::msgbuf</code>, <code>::status</code> and <code>::stack</code>.</p>
<p>If the system hangs, copy down the last few lines regarding modules on screen,
and do one of:</p>
<ul>
<li>On a serial console, send a BREAK on the serial line using your serial communications program.</li>
<li>On a local keyboard on SPARC, press 'Stop' ('L1'), then 'A'.</li>
<li>On a local keyboard on x86, press 'Shift-Pause'; or 'Esc-B'; or 'F1', then 'A'.</li>
<li>Generate an NMI if your system provides this capability (hardware button, service processor command).</li>
</ul>
<p>When you are successful the system should drop you into a kmdb prompt.</p>
<ul>
<li>Use <code>$&lt;systemdump</code> to save a crash dump. The system should automatically reboot when finished.</li>
<li>Follow "Gathering Information About A Crash", above.</li>
<li>If you cannot save a crash dump, and are on a serial console, enter ::msgbuf, ::panicinfo, ::cpuinfo -v and::threadlist -v 10 and record the output. (Or take photos if you're unlucky enough to be at a VGA console)..</li>
</ul>
<h2 id="gathering-information-from-a-running-system-using-only-nmi-x86">Gathering Information from a Running System, Using only NMI (x86)<a class="headerlink" href="#gathering-information-from-a-running-system-using-only-nmi-x86" title="Permanent link">&para;</a></h2>
<p>In order to force a crash dump form a system that seems hung or frozen e.g. no
longer has has interactive capabilities if your system supports NMI (hardware
button, service processor command) it might be a good practice to permanently
configure the following:</p>
<ul>
<li>Adding the line (as user root) <code>set pcplusmp:apic_panic_on_nmi = 1</code> to your /etc/system file allows a crash dump to be generated on the receipt by your system of an NMI (non-maskable interrupt). Once this line is added you will have to do a reconfiguration reboot.</li>
<li>Note, If you also have the line <code>set pcplusmp:apic_kmdb_on_nmi=1</code> in your /etc/system file you will not generate a crash dump, but rather go into the kernel debugger as this later directive takes priority over the <code>pcplusmp:apic_panic_on_nmi</code> setting.</li>
</ul>
<p>The above might be a a very good practice as it simplifies forcing a "crash
dump" (avoids the x86 requirement of  keyboard input e.g. press 'Shift-Pause';
or 'Esc-B'; or 'F1', then 'A'.).  However this simplification will a) not work
on all platforms and b) might even cause issues on a few system types and c)
works if your system loads/uses the pcplusmp module (not the apix module).
Because of these requirements despite the fact that many admins use this as a
default setting it is not the default configuration for fresh installs of the
OS.</p>
<p>More resources:</p>
<ul>
<li><a href="https://illumos.org/books/wdd/debug-60.html">Debugging, Testing, and Tuning Device Drivers</a> (from the <a href="https://illumos.org/books/wdd/">Writing Device Drivers Guide</a>)</li>
<li><a href="https://illumos.org/books/mdb/kmem-1.html">Debugging With the Kernel Memory Allocator</a> (from the <a href="https://illumos.org/books/mdb/">Modular Debugger Guide</a>)</li>
<li><a href="https://web.archive.org/web/20100302205006/http://blogs.sun.com/dmick/entry/diagnosing_kernel_hangs_panics_with">Diagnosing kernel hangs/panics with kmdb and moddebug</a> by Dan Mick</li>
<li><a href="http://kristof.willen.be/node/1100">Crash dump analysis on OpenSolaris</a></li>
<li><a href="http://shanit.blogspot.com/2009/03/solaris-10-crashdumps.html">Solaris 10 crash dumps</a></li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/illumos" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.495d10a2.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>