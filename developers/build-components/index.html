



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-2.9.0">
    
    
      
        <title>Building Components - illumos</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.23c5c491.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.0c1f321e.js"></script>
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#how-to-build-components" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="" title="illumos" class="md-header-nav__button md-logo">
          
            <img src="../../assets/images/illumos.svg">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
        
          <div class="md-flex__cell md-flex__cell--shrink">
            <div class="md-header-nav__source">
              


  


  <a href="https://github.com/illumos/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      illumos/docs
    </div>
  </a>

            </div>
          </div>
        
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../assets/images/illumos.svg">
      
    </span>
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/illumos/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      illumos/docs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/" title="What is illumos?" class="md-nav__link">
      What is illumos?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/who/" title="Who uses illumos?" class="md-nav__link">
      Who uses illumos?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/features/" title="Features" class="md-nav__link">
      Features
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/distro/" title="Distributions" class="md-nav__link">
      Distributions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/leadership/" title="Leadership" class="md-nav__link">
      Leadership
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/logo/" title="Logo" class="md-nav__link">
      Logo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../flagdays/" title="Flag Days" class="md-nav__link">
      Flag Days
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      History
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        History
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/history/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/announcement/" title="Announcement" class="md-nav__link">
      Announcement
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/bugs/" title="Bug Reporting" class="md-nav__link">
      Bug Reporting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/books/" title="Books" class="md-nav__link">
      Books
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/manual/" title="Manual Pages" class="md-nav__link">
      Manual Pages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5" type="checkbox" id="nav-6-5">
    
    <label class="md-nav__link" for="nav-6-5">
      Debugging
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-5">
        Debugging
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/debug/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/debug-systems/" title="Systems" class="md-nav__link">
      Systems
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/debug-apps/" title="Applications" class="md-nav__link">
      Applications
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../build-illumos/" title="Building illumos" class="md-nav__link">
      Building illumos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../build-times/" title="Build times" class="md-nav__link">
      Build times
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Building Components
      </label>
    
    <a href="./" title="Building Components" class="md-nav__link md-nav__link--active">
      Building Components
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#when-its-appropriate" title="When it's appropriate" class="md-nav__link">
    When it's appropriate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#this-example" title="This example" class="md-nav__link">
    This example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mercurial-hg" title="Mercurial (hg)" class="md-nav__link">
    Mercurial (hg)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-compiler" title="The compiler" class="md-nav__link">
    The compiler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-tools" title="Build tools" class="md-nav__link">
    Build tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-path" title="The PATH" class="md-nav__link">
    The PATH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-symlink" title="A symlink" class="md-nav__link">
    A symlink
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparation" title="Preparation" class="md-nav__link">
    Preparation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-up-the-location" title="Set up the location" class="md-nav__link">
    Set up the location
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtain-the-source" title="Obtain the source" class="md-nav__link">
    Obtain the source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-up-the-environment-file" title="Set up the environment file" class="md-nav__link">
    Set up the environment file
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-the-workspace-for-component-build" title="Preparing the workspace for component build" class="md-nav__link">
    Preparing the workspace for component build
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#procedure" title="Procedure" class="md-nav__link">
    Procedure
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#location" title="Location" class="md-nav__link">
    Location
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build" title="Build" class="md-nav__link">
    Build
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check" title="Check" class="md-nav__link">
    Check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternatives" title="Alternatives" class="md-nav__link">
    Alternatives
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-component-build-examples" title="Some component build examples." class="md-nav__link">
    Some component build examples.
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../build-datasets/" title="Build Datasets" class="md-nav__link">
      Build Datasets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workspaces/" title="Multiple Workspaces" class="md-nav__link">
      Multiple Workspaces
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../multibug/" title="Working Multiple Bugs" class="md-nav__link">
      Working Multiple Bugs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../studio/" title="Building with Sun Studio" class="md-nav__link">
      Building with Sun Studio
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../comp-webrev/" title="Comparing with webrev" class="md-nav__link">
      Comparing with webrev
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Contributing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Contributing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/quality/" title="On Quality" class="md-nav__link">
      On Quality
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/qds/" title="Quality Death Spiral" class="md-nav__link">
      Quality Death Spiral
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/docs/" title="Documentation" class="md-nav__link">
      Documentation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Community
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Community
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/lists/" title="Mailing Lists" class="md-nav__link">
      Mailing Lists
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/events/" title="Events" class="md-nav__link">
      Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/videos/" title="Videos" class="md-nav__link">
      Videos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-5" type="checkbox" id="nav-9-5">
    
    <label class="md-nav__link" for="nav-9-5">
      Google Summer of Code
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-5">
        Google Summer of Code
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc-application/" title="Student Application" class="md-nav__link">
      Student Application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc-expectations/" title="Student Expectations" class="md-nav__link">
      Student Expectations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc-proposal/" title="Writing a Proposal" class="md-nav__link">
      Writing a Proposal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc-mentor/" title="Becoming a Mentor" class="md-nav__link">
      Becoming a Mentor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc-mentor-application/" title="Mentoring Application" class="md-nav__link">
      Mentoring Application
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../projects/" title="Projects" class="md-nav__link">
      Projects
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#when-its-appropriate" title="When it's appropriate" class="md-nav__link">
    When it's appropriate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#this-example" title="This example" class="md-nav__link">
    This example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mercurial-hg" title="Mercurial (hg)" class="md-nav__link">
    Mercurial (hg)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-compiler" title="The compiler" class="md-nav__link">
    The compiler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-tools" title="Build tools" class="md-nav__link">
    Build tools
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-path" title="The PATH" class="md-nav__link">
    The PATH
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-symlink" title="A symlink" class="md-nav__link">
    A symlink
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparation" title="Preparation" class="md-nav__link">
    Preparation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-up-the-location" title="Set up the location" class="md-nav__link">
    Set up the location
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtain-the-source" title="Obtain the source" class="md-nav__link">
    Obtain the source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-up-the-environment-file" title="Set up the environment file" class="md-nav__link">
    Set up the environment file
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-the-workspace-for-component-build" title="Preparing the workspace for component build" class="md-nav__link">
    Preparing the workspace for component build
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#procedure" title="Procedure" class="md-nav__link">
    Procedure
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#location" title="Location" class="md-nav__link">
    Location
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build" title="Build" class="md-nav__link">
    Build
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check" title="Check" class="md-nav__link">
    Check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternatives" title="Alternatives" class="md-nav__link">
    Alternatives
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-component-build-examples" title="Some component build examples." class="md-nav__link">
    Some component build examples.
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/illumos/docs/edit/master/docs/developers/build-components.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <div class="admonition warning">
<p class="admonition-title">Requires Review</p>
<p>This page references some old practices and needs to be reviewed.</p>
</div>
<h1 id="how-to-build-components">How to build components<a class="headerlink" href="#how-to-build-components" title="Permanent link">&para;</a></h1>
<h2 id="when-its-appropriate">When it's appropriate<a class="headerlink" href="#when-its-appropriate" title="Permanent link">&para;</a></h2>
<p>You can build just a component when you don't need the entire consolidation,
when you are building a self-contained utility, when you are getting started
with Illumos, or when you want to do a quick build.</p>
<p>This approach is only for independent programs like m4, date, cron, hostid,
man... etc.</p>
<h2 id="this-example">This example<a class="headerlink" href="#this-example" title="Permanent link">&para;</a></h2>
<p>I'm building the m4 command from the ONNV consolidation on a system running oi_148.</p>
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h2>
<p>Setup of the compilation environment is detailed in <a href="../">How To Build illumos</a>.</p>
<h3 id="mercurial-hg">Mercurial (hg)<a class="headerlink" href="#mercurial-hg" title="Permanent link">&para;</a></h3>
<p>This should be installed in /usr from the IPS package pkg:/developer/versioning/mercurial.</p>
<h3 id="the-compiler">The compiler<a class="headerlink" href="#the-compiler" title="Permanent link">&para;</a></h3>
<p>The C compiler is the properly patched version of GCC 4.4.4</p>
<h3 id="build-tools">Build tools<a class="headerlink" href="#build-tools" title="Permanent link">&para;</a></h3>
<p>These reside in /opt/onbld and are installed from the IPS package pkg:/developer/build/onbld.</p>
<h3 id="the-path">The PATH<a class="headerlink" href="#the-path" title="Permanent link">&para;</a></h3>
<p>Mine is:</p>
<div class="codehilite"><pre><span></span>PATH=/usr/local/bin:/usr/bin:/opt/SUNWspro/bin:/usr/ccs/bin:\
/opt/onbld/bin:/opt/onbld/bin/i386:/opt/sfw/bin:/usr/sfw/bin:\
/usr/dt/bin:/usr/openwin/bin:/usr/sbin
export PATH
</pre></div>

<p>Just make sure all of the executables you need are available through the PATH.</p>
<h3 id="a-symlink">A symlink<a class="headerlink" href="#a-symlink" title="Permanent link">&para;</a></h3>
<p>I needed this symlink for the PATH to work correctly:</p>
<div class="codehilite"><pre><span></span>/opt/SUNWspro -&gt; /opt/sunstudio12.1
</pre></div>

<h2 id="preparation">Preparation<a class="headerlink" href="#preparation" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p>Setup of the compilation environment, including preparation of the recommended directories in a ZFS layout, and checkout of the code, is detailed in How To Build illumos.
The steps below outline an alternative (and somewhat incompatible) approach to this procedure. Still, if you only intend to build small pieces of the project, especially if you only have an unprivileged user account on the build host, these instructions should suffice and may be less complicated to follow.</p>
</div>
<h3 id="set-up-the-location">Set up the location<a class="headerlink" href="#set-up-the-location" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>$ cd ~/Downloads
$ mkdir code
$ cd code
</pre></div>

<h3 id="obtain-the-source">Obtain the source<a class="headerlink" href="#obtain-the-source" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>$ hg clone ssh://anonhg@hg.illumos.org/illumos-gate
</pre></div>

<h3 id="set-up-the-environment-file">Set up the environment file<a class="headerlink" href="#set-up-the-environment-file" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>$ cd illumos-gate
$ cp -p usr/src/tools/env/illumos.sh .
$ cp -p illumos.sh illumos.sh-orig
$ vim illumos.sh
...

### Result of edition:
$ diff illumos.sh-orig illumos.sh
58c58
&lt; export GATE=&#39;testws&#39;
---
&gt; export GATE=&#39;illumos-gate&#39;
61c61
&lt; export CODEMGR_WS=&quot;$HOME/ws/$GATE&quot;
---
&gt; export CODEMGR_WS=&quot;$HOME/Downloads/code/$GATE&quot;
196c196
&lt; #export ONBLD_TOOLS=&#39;/opt/onbld&#39;
---
&gt; export ONBLD_TOOLS=&#39;/opt/onbld&#39;
217a218,225
&gt; 
&gt; # Lint locations
&gt; i386_LINT=/opt/sunstudio12.1/bin/lint; export i386_LINT
&gt; amd64_LINT=/opt/sunstudio12.1/bin/lint; export amd64_LINT
&gt; sparc_LINT=/opt/sunstudio12.1/bin/lint; export sparc_LINT
&gt; sparcv9_LINT=/opt/sunstudio12.1/bin/lint; export sparcv9_LINT
&gt; 
&gt; ####
</pre></div>

<p>As you can see, I modified some lines in the file to suit my build system, and
added a few so that the lint command from Sun Studio 12u1 could be found.</p>
<h2 id="preparing-the-workspace-for-component-build">Preparing the workspace for component build<a class="headerlink" href="#preparing-the-workspace-for-component-build" title="Permanent link">&para;</a></h2>
<p>A few tools have to be prepared before we can build a component. To build them,
you should run commands in a new shell which sets some environment variables:</p>
<div class="codehilite"><pre><span></span>ln -s usr/src/tools/scripts/bldenv.sh .
ksh93 bldenv.sh -d illumos.sh -c &quot;cd usr/src &amp;&amp; dmake setup&quot;
</pre></div>

<h2 id="procedure">Procedure<a class="headerlink" href="#procedure" title="Permanent link">&para;</a></h2>
<h3 id="location">Location<a class="headerlink" href="#location" title="Permanent link">&para;</a></h3>
<p>Change directory to where the m4 Makefile (the build target of our example) resides:</p>
<div class="codehilite"><pre><span></span>$ cd ~/Downloads/code/illumos-gate/usr/src/cmd/sgs/m4
</pre></div>

<h2 id="build">Build<a class="headerlink" href="#build" title="Permanent link">&para;</a></h2>
<p>Clean out the object files by 'make clean'. It only deletes object files, and
not the generated executables. But the executables will be regenerated once all
the object files are rebuilt (and become newer than the executable target).</p>
<div class="codehilite"><pre><span></span>$ bldenv ~/Downloads/code/illumos-gate/illumos.sh &#39;make clean&#39;
</pre></div>

<p>Do a dry-run by 'make -n'</p>
<div class="codehilite"><pre><span></span>$ bldenv ~/Downloads/code/illumos-gate/illumos.sh &#39;make -n&#39;
</pre></div>

<p>Now actually build m4 binary by 'make'</p>
<div class="codehilite"><pre><span></span>$ bldenv ~/Downloads/code/illumos-gate/illumos.sh &#39;make&#39;
</pre></div>

<p>Note that the argument list must be quoted if it contains more than one word.</p>
<h3 id="check">Check<a class="headerlink" href="#check" title="Permanent link">&para;</a></h3>
<p>Object file and i386/m4 executable file got generated.</p>
<div class="codehilite"><pre><span></span>$ find i386/
i386/
i386/Makefile
i386/.make.state
i386/m4objs
i386/m4objs/m4ext.o
i386/m4objs/m4y.o
i386/m4objs/m4macs.o
i386/m4objs/m4.o
i386/m4.xpg4
i386/m4objs.xpg4
i386/m4objs.xpg4/m4y_xpg4.o
i386/m4objs.xpg4/m4ext.o
i386/m4objs.xpg4/m4.o
i386/m4objs.xpg4/m4macs.o
i386/m4
$
</pre></div>

<p>Use "ldd" and "file" commands to profile the built m4 binary.</p>
<div class="codehilite"><pre><span></span>$ ldd i386/m4
        libc.so.1 =&gt;     /lib/libc.so.1
        libm.so.2 =&gt;     /lib/libm.so.2
$ file i386/m4
i386/m4:        ELF 32-bit LSB executable 80386 Version 1 [FPU],  \
dynamically linked, not stripped, \
no debugging information available
$
Run lint
$ bldenv ~/Downloads/code/illumos-gate/illumos.sh &#39;make lint&#39;
</pre></div>

<h3 id="alternatives">Alternatives<a class="headerlink" href="#alternatives" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>Garrett D&#39;Amore suggests:
doing &quot;make setup&quot; in the top level, plus a &quot;make install&quot; in the
directory of interest, usually works if the utility is self contained.
</pre></div>

<div class="codehilite"><pre><span></span>Jens Elkner recommends:
I made the src tree once nightly to &quot;initialize&quot; required stuff. After
that I just source the script mentioned below when I start working,
change to the dir of interest and call &#39;make ...&#39;. This usually works
even if nightly doesn&#39;t run through completely ...

http://iws.cs.uni-magdeburg.de/~elkner/osol/onbld.env2

Local copy backup in illumos Wiki: onbld.env2
</pre></div>

<div class="codehilite"><pre><span></span>Dan McDonald cites:
http://kebesays.blogspot.com/2011/03/for-illumos-newbies-on-developing-small.html

I haven&#39;t looked very closely at the Illumos build instructions, but
I&#39;m going to do some things now that will help kernel module writers
(e.g. device drivers) get started without resorting to a full build
right off the bat.
</pre></div>

<h2 id="some-component-build-examples">Some component build examples.<a class="headerlink" href="#some-component-build-examples" title="Permanent link">&para;</a></h2>
<p>libc build on oi_148 dual CPU with 2G RAM VMware session (also note this example uses the recommended build directory layout):</p>
<div class="codehilite"><pre><span></span>$pwd
/code/illumos-gate/usr/src/lib/libc

$time bldenv /code/illumos-gate/illumos.sh &#39;make&#39;
&lt;snip&gt;
ar: creating libc_pic.a
/usr/ccs/bin/mcs -d -n .SUNW_ctf libc_pic.a &gt; /dev/null 2&gt;&amp;1
ar -ts libc_pic.a &gt; /dev/null
/code/illumos-gate/usr/src/lib/libc/i386/etc

real    10m37.770s
user    7m58.969s
sys     5m54.108s

$
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/illumos" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.495d10a2.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>