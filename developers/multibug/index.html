



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-2.9.0">
    
    
      
        <title>Working Multiple Bugs - illumos</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.23c5c491.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.0c1f321e.js"></script>
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#working-on-multiple-bugs-at-once" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="" title="illumos" class="md-header-nav__button md-logo">
          
            <img src="../../assets/images/illumos.svg">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
        
          <div class="md-flex__cell md-flex__cell--shrink">
            <div class="md-header-nav__source">
              


  


  <a href="https://github.com/illumos/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      illumos/docs
    </div>
  </a>

            </div>
          </div>
        
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../assets/images/illumos.svg">
      
    </span>
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/illumos/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      illumos/docs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/" title="What is illumos?" class="md-nav__link">
      What is illumos?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/who/" title="Who uses illumos?" class="md-nav__link">
      Who uses illumos?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/features/" title="Features" class="md-nav__link">
      Features
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/distro/" title="Distributions" class="md-nav__link">
      Distributions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/leadership/" title="Leadership" class="md-nav__link">
      Leadership
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/logo/" title="Logo" class="md-nav__link">
      Logo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../flagdays/" title="Flag Days" class="md-nav__link">
      Flag Days
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      History
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        History
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/history/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/announcement/" title="Announcement" class="md-nav__link">
      Announcement
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/bugs/" title="Bug Reporting" class="md-nav__link">
      Bug Reporting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/books/" title="Books" class="md-nav__link">
      Books
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/manual/" title="Manual Pages" class="md-nav__link">
      Manual Pages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5" type="checkbox" id="nav-6-5">
    
    <label class="md-nav__link" for="nav-6-5">
      Debugging
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-5">
        Debugging
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/debug/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/debug-systems/" title="Systems" class="md-nav__link">
      Systems
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/debug-apps/" title="Applications" class="md-nav__link">
      Applications
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../build-illumos/" title="Building illumos" class="md-nav__link">
      Building illumos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../build-times/" title="Build times" class="md-nav__link">
      Build times
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../build-components/" title="Building Components" class="md-nav__link">
      Building Components
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../build-datasets/" title="Build Datasets" class="md-nav__link">
      Build Datasets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workspaces/" title="Multiple Workspaces" class="md-nav__link">
      Multiple Workspaces
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Working Multiple Bugs
      </label>
    
    <a href="./" title="Working Multiple Bugs" class="md-nav__link md-nav__link--active">
      Working Multiple Bugs
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#three-tiered-approach" title="Three-tiered approach" class="md-nav__link">
    Three-tiered approach
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-setup" title="General setup" class="md-nav__link">
    General setup
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zfs-cloning-prepare-dataset-hierarchy" title="zfs-cloning – Prepare dataset hierarchy" class="md-nav__link">
    zfs-cloning – Prepare dataset hierarchy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hg-cloning-or-file-copying" title="hg-cloning or file-copying" class="md-nav__link">
    hg-cloning or file-copying
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize-the-local-master-repository" title="Initialize the local master repository" class="md-nav__link">
    Initialize the local master repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-the-local-master-repository" title="Update the local master repository" class="md-nav__link">
    Update the local master repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clone-the-local-master-into-a-child-repository-for-work" title="Clone the local master into a child repository for work" class="md-nav__link">
    Clone the local master into a child repository for work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zfs-cloning" title="zfs-cloning" class="md-nav__link">
    zfs-cloning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-copy-cloning" title="file copy cloning" class="md-nav__link">
    file copy cloning
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#work-in-the-child-copy" title="Work in the child copy" class="md-nav__link">
    Work in the child copy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#after-some-work-in-the-child-workspace-you-need-to-pull-changes-from-upstream" title="After some work in the child workspace, you need to pull changes from upstream..." class="md-nav__link">
    After some work in the child workspace, you need to pull changes from upstream...
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publish-your-work" title="Publish your work" class="md-nav__link">
    Publish your work
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../studio/" title="Building with Sun Studio" class="md-nav__link">
      Building with Sun Studio
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../comp-webrev/" title="Comparing with webrev" class="md-nav__link">
      Comparing with webrev
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Contributing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Contributing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/quality/" title="On Quality" class="md-nav__link">
      On Quality
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/qds/" title="Quality Death Spiral" class="md-nav__link">
      Quality Death Spiral
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/docs/" title="Documentation" class="md-nav__link">
      Documentation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Community
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Community
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/lists/" title="Mailing Lists" class="md-nav__link">
      Mailing Lists
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/events/" title="Events" class="md-nav__link">
      Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/videos/" title="Videos" class="md-nav__link">
      Videos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-5" type="checkbox" id="nav-9-5">
    
    <label class="md-nav__link" for="nav-9-5">
      Google Summer of Code
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-5">
        Google Summer of Code
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc-application/" title="Student Application" class="md-nav__link">
      Student Application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc-expectations/" title="Student Expectations" class="md-nav__link">
      Student Expectations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc-proposal/" title="Writing a Proposal" class="md-nav__link">
      Writing a Proposal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc-mentor/" title="Becoming a Mentor" class="md-nav__link">
      Becoming a Mentor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../community/gsoc-mentor-application/" title="Mentoring Application" class="md-nav__link">
      Mentoring Application
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../projects/" title="Projects" class="md-nav__link">
      Projects
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#three-tiered-approach" title="Three-tiered approach" class="md-nav__link">
    Three-tiered approach
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-setup" title="General setup" class="md-nav__link">
    General setup
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zfs-cloning-prepare-dataset-hierarchy" title="zfs-cloning – Prepare dataset hierarchy" class="md-nav__link">
    zfs-cloning – Prepare dataset hierarchy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hg-cloning-or-file-copying" title="hg-cloning or file-copying" class="md-nav__link">
    hg-cloning or file-copying
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize-the-local-master-repository" title="Initialize the local master repository" class="md-nav__link">
    Initialize the local master repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-the-local-master-repository" title="Update the local master repository" class="md-nav__link">
    Update the local master repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clone-the-local-master-into-a-child-repository-for-work" title="Clone the local master into a child repository for work" class="md-nav__link">
    Clone the local master into a child repository for work
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zfs-cloning" title="zfs-cloning" class="md-nav__link">
    zfs-cloning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-copy-cloning" title="file copy cloning" class="md-nav__link">
    file copy cloning
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#work-in-the-child-copy" title="Work in the child copy" class="md-nav__link">
    Work in the child copy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#after-some-work-in-the-child-workspace-you-need-to-pull-changes-from-upstream" title="After some work in the child workspace, you need to pull changes from upstream..." class="md-nav__link">
    After some work in the child workspace, you need to pull changes from upstream...
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publish-your-work" title="Publish your work" class="md-nav__link">
    Publish your work
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/illumos/docs/edit/master/docs/developers/multibug.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <div class="admonition warning">
<p class="admonition-title">Requires Review</p>
<p>This page references some old practices and needs to be reviewed.</p>
</div>
<h1 id="working-on-multiple-bugs-at-once">Working on multiple bugs at once<a class="headerlink" href="#working-on-multiple-bugs-at-once" title="Permanent link">&para;</a></h1>
<p>By <a href="">Jim Klimov</a></p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>It is not rare to have a contributor working on several disparate sub-projects
which are of interest to him, such as fixing different bugs or updating
documentation man-pages, in parallel. This means that the developer has been
assigned several bug/RFE IDs in the common bugtracker and prepares changes in
his local development environment in order to propose a webrev for public
review and ultimately request-to-integrate his or her fixes. A "newbie"
contributor might take on a number of bite-sized quests that others postponed
indefinitely, just to get the hang of the development environment.</p>
<p>The tricky part here is that a developer can be working on small bugs, and the
latency of review/RTI process would cause him to idle around between singular
quests and lose interest, while he could go on a new task right after posting
one for review. However, working on several tasks in one workspace is also
potentially problematic – the webrev would consolidate all changes (from works
on different bugs), while the central (official) repository policies highly
prefer atomic updates – "one changeset = one bug", or close to that.</p>
<p>Source-code management systems have a number of solutions to this problem.
Where other systems propose working in branches of code, which would ultimately
be merged, most if not all illumos developers (of those who responded to my
call for real-life info) prefer to clone complete Mercurial repositories (one
per bug), spawn separate workspaces and develop there. The rest of this page
shall discuss several practical approaches to this.</p>
<p>There is also some controversy about using Mercurial Queues to track small
fixes:</p>
<div class="admonition warning">
<p>Gordon: If you have a bunch of small fixes underway simultaneously, you might consider using "hg mq" (hg qpush, hg qpop, ...): <a href="http://mercurial.selenic.com/wiki/MqExtension">http://mercurial.selenic.com/wiki/MqExtension</a>
Dan: I find mq causes more problems than it solves but that's just me. </p>
</div>
<h2 id="three-tiered-approach">Three-tiered approach<a class="headerlink" href="#three-tiered-approach" title="Permanent link">&para;</a></h2>
<p>In this approach the developer maintains a "clean" replica of the official
repository ("illumos-clone" as a hg-clone of official illumos-gate in examples
below), and his development workspaces ("ws1 .. wsN" in examples below) are
instantiated in clones of this replica. No actual development occurs in
illumos-clone workspace.</p>
<p>Whenever work on a new task starts, the developer updates his illumos-clone to
current source code, and creates a clone of it (several methods are available
and discussed below) named like ws1 or illumos-bug1234.</p>
<p>For people who understand pictures better, here is an illustration of proposed
repository cloning and tiering architectures:</p>
<p><img alt="diagram" src="../../images/build-multibug-diagram.png" /></p>
<p>After some development and testing, the developer has committed his changes to
the ws1 repository (with the comment like "1234 Bug description one-liner"). He
should then pull and update the illumos-clone repository from official sources
and update the ws1 repository from illumos-clone, and merge any changes. This
way the ws1 repository now contains his work as if it was done against the
current revision of the "official" public source codes. Then the developer
prepares a webrev and provides it for public review.</p>
<div class="admonition warning">
<div class="codehilite"><pre><span></span>Bob: While you were patiently waiting, other changes were put into upstream
</pre></div>


<p>Mercurial.  These changes have to be pulled and merged (to tip) before Mercurial
would allow you to push (assuming you were authorized).  If files you edited
have been updated over time, it would be polite to pull, merge with those
changes, re-test, and if they are significant to your work, re-request a
review.</p>
<div class="codehilite"><pre><span></span>Mercurial only allows you to push if there is just one head (tip). If
</pre></div>


<p>changes come in via a pull after you have done a commit, then there will be two
heads, which need to be merged.  Use 'hg heads' to see the heads.</p>
</div>
<p>For repositories where the user has the push privileges (such as a forked
repository on the BitBucket), the developer can push his tested changes from
ws1 repository to illumos-clone repository and then to his own repository fork
on the public hosting service. This would allow other developers to look into
completed code for review, or to pull his changes into their systems (such as
when the integration into "official" repository occurs).</p>
<div class="admonition warning">
<p>Bob: If you do "hg paths" in illumos-clone it will report that it points to the
official master.  If you do the same in "ws1" it will report that it points to
local "illumos-clone".</p>
<p>If your approved changeset is in "ws1" then you would first do "hg push" in
"ws1",  then change to "illumos-clone" (which now contains the changeset) and
do "hg push" to push to the official master.  Of course merging is likely
required before you can push.</p>
<p>The necessary pulls are inverse of the push – so if you want to get new
upstream changesets into "ws1", you would first do an "hg pull" in
"illumos-clone" and then in "ws1".</p>
<p>Changes may be pushed to something other than the default upstream repository
by specifying the repository URL when you do the push, or by editing .hg/hgrc
inside the repository base directory and changing the "default" definition to
the new path.  This means that you could push directly from "ws1" to the
official master provided that any pending upstream changesets have been merged
as a merge changeset.</p>
</div>
<p>This pattern applies not only to illumos-gate, but also to other related
illumos/OpenIndiana subprojects hosted in Mercurial repositories. Keeping a
tier of the golden repository allows you to save some internet traffic (when
propagating changesets from upstream to your numerous workspaces) and to
quickly instantiate clones of the current public source code (again, saving on
traffic – actually, being independent of network connectivity).</p>
<div class="admonition warning">
<p>Dan: I actually maintain a clone of illumos-gate locally (illumos-clone), and
my works in progress are children of illumos-clone. It does eat disk space, but
combined with sensible build practices (e.g. not doing full nightly builds
until you're very close to integration) it's not all that bad.</p>
<p>Don't forget about building modules when you only need modules, as I mention
here: <a href="http://kebesays.blogspot.com/2011/03/for-illumos-newbies-on-developing-small.html">http://kebesays.blogspot.com/2011/03/for-illumos-newbies-on-developing-small.html</a></p>
</div>
<p>Some developers use short-lived repos for one task, others instead prefer to
spawn a few workspaces, and reuse them for new projects after the current one
has been committed upstream:</p>
<div class="admonition warning">
<p>Steve: after my changes are pushed, I can just sync it up with its parent and I
am ready to work on another change-set in this repo (hg pull; hg update).  I do
use mv to rename repos, so that I have some visual reminder of what that repo
is currently used for.
Dan: Once a child's diffs appear in illumos-gate, the child gets removed.</p>
</div>
<h2 id="general-setup">General setup<a class="headerlink" href="#general-setup" title="Permanent link">&para;</a></h2>
<p>General build-system preparation is as outlined in How To Build illumos,
however there is some difference in source-code repository organization and
naming. Like in that tutorial, the repositories are assumed to be hosted under
/code directory. Depending on the adopted pattern, each repository can be an
individual ZFS dataset, or they can be sub-directories within one filesystem.</p>
<p>Elaborate on dataset setup, perhaps copy from main tutorial.</p>
<p>There are at least two variations, depending on the technology you choose to
use. You can clone repositories with tools built into the SCM, in our case – by
using the "hg clone" command. Alternately you can use ZFS clones and rewrite
the pointer to parent repository in the cloned child repo. Also the
repositories can be just copied as directories with files, but this is likely
to be the most space-consuming option.</p>
<h3 id="zfs-cloning-prepare-dataset-hierarchy">zfs-cloning – Prepare dataset hierarchy<a class="headerlink" href="#zfs-cloning-prepare-dataset-hierarchy" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These examples put the repository into rpool. You're welcome to use another ZFS pool if available on your system.</p>
</div>
<p>To follow this route, each your repository must reside in its individual
dedicated dataset which was created and prepared with commands like these (see
How To Build illumos for more details):</p>
<div class="codehilite"><pre><span></span>sudo zfs create -o compression=lzjb -o atime=off rpool/export/home/illumos-dev
sudo zfs create rpool/export/home/illumos-dev/code
sudo ln -s ./export/home/illumos-dev/code /
sudo chown -R $USER /export/home/illumos-dev
sudo zfs create -o sync=disabled rpool/export/home/illumos-dev/code/illumos-clone
</pre></div>

<h3 id="hg-cloning-or-file-copying">hg-cloning or file-copying<a class="headerlink" href="#hg-cloning-or-file-copying" title="Permanent link">&para;</a></h3>
<p>I was told that hg clone would try to use hardlinks to save space and time, so I guess keeping the masters and clones in one filesystem (accessible under /code below) is highly recommended.</p>
<div class="admonition warning">
<p>Bob: Look in the hidden .hg directory for the actual repository. For local
clones, Hg can use hard links to refer to the same repository files. The hard
link is broken if the file is to be updated.
ZFS's clone can do a bit better because Mercurial only appends to repository
files so ZFS-cloned blocks will remain de-duplicated unless they are a short
tail block which was updated.</p>
</div>
<p>You are still welcome to use a ZFS dataset dedicated to holding all the
repositories:</p>
<div class="codehilite"><pre><span></span>sudo zfs create -o compression=lzjb -o atime=off rpool/export/home/illumos-dev
sudo zfs create rpool/export/home/illumos-dev/code
sudo ln -s ./export/home/illumos-dev/code /
sudo chown -R $USER /export/home/illumos-dev
</pre></div>

<h3 id="initialize-the-local-master-repository">Initialize the local master repository<a class="headerlink" href="#initialize-the-local-master-repository" title="Permanent link">&para;</a></h3>
<p>The repository directory may exist, but must be empty if it does.</p>
<div class="codehilite"><pre><span></span>cd /code
hg clone ssh://anonhg@hg.illumos.org/illumos-gate ./illumos-clone
</pre></div>

<div class="admonition warning">
<p>Never touch illumos-clone except to pull changes from upstream</p>
</div>
<p>Mercurial allows to rename repositories as suits you today with filesystem
utilities (this may be more useful on your child repositories though – i.e.
rename them according to your bug-number-du-jour), so creation of your golden
repository could instead be done like this:</p>
<div class="codehilite"><pre><span></span>cd /code
hg clone ssh://anonhg@hg.illumos.org/illumos-gate
mv illumos-gate illumos-clone
</pre></div>

<h3 id="update-the-local-master-repository">Update the local master repository<a class="headerlink" href="#update-the-local-master-repository" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>cd /code/illumos-clone
hg pull -u
</pre></div>

<p>Since there are no changes of your own in this repo, merging should be trivial and complete automatically.</p>
<h3 id="clone-the-local-master-into-a-child-repository-for-work">Clone the local master into a child repository for work<a class="headerlink" href="#clone-the-local-master-into-a-child-repository-for-work" title="Permanent link">&para;</a></h3>
<p>There are at least two variations, depending on the technology you choose to use. You can clone repositories with tools built into the SCM, in our case – by using the "hg clone" command. Alternately you can use ZFS clones and rewrite the default pointer to parent repository in the cloned child repo.</p>
<div class="admonition warning">
<p>Bob: In addition to "default" there is "default-push" which specifies the
default URL to push to. Besides the apparent "exotic" setup there is also the
mundane approach (which I use) which pulls updates from the http:// appearance
of a server and pushes to the ssh:// appearance of the same server. This
results in faster clones/updates while obtaining the secure SSH authentication
when pushing.</p>
</div>
<p>Also the repositories can be just copied as directories with files, but this is
likely to be the most space-consuming option.</p>
<p>Examples below use the bugID-based naming convention for child repositories and
their workspaces. Some developers instead prefer to spawn a few
statically-named workspaces ("ws1 .. wsN"), and reuse them for new projects
after the current one has been committed upstream (so the repo with this
author's changes is identical to upstream).</p>
<h3 id="zfs-cloning">zfs-cloning<a class="headerlink" href="#zfs-cloning" title="Permanent link">&para;</a></h3>
<p>Update the local master repository (see above) and create a uniquely named ZFS
snapshot of its dataset, and then clone it, for example:</p>
<div class="codehilite"><pre><span></span>zfs snapshot rpool/export/home/illumos-dev/code/illumos-clone@20120503-2006
zfs clone rpool/export/home/illumos-dev/code/illumos-clone@20120503-2006 rpool/export/home/illumos-dev/code/illumos-bug1234
</pre></div>

<p>Now you'll have to modify the clone's pointer to parent repository (so it's
local, not Internet as was for the golden image). Edit
/code/illumos-bug1234/.hg/hgrc file which may look like this:</p>
<div class="codehilite"><pre><span></span>[paths]
default = ssh://anonhg@hg.illumos.org/illumos-gate
</pre></div>

<p>You should replace the default path with the local pathname to the local master repository, like this:</p>
<div class="codehilite"><pre><span></span>[paths]
default = /code/illumos-clone
hg-cloning
</pre></div>

<p>Update the local master repository (see above) and create a Mercurial clone:</p>
<div class="codehilite"><pre><span></span>cd /code
hg clone illumos-clone illumos-bug1234
</pre></div>

<p>This takes care of the child's parent relationships.</p>
<h3 id="file-copy-cloning">file copy cloning<a class="headerlink" href="#file-copy-cloning" title="Permanent link">&para;</a></h3>
<p>This is the least recommended method. Still, you might have your reasons...</p>
<p>Update the local master repository (see above) and copy the whole repo directory:</p>
<div class="codehilite"><pre><span></span>cd /code
cp -pr illumos-clone illumos-bug1234
</pre></div>

<p>You might alternatively use rsync, gtar, cpio and such.</p>
<h2 id="work-in-the-child-copy">Work in the child copy<a class="headerlink" href="#work-in-the-child-copy" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span>cd /code/illumos-bug1234
### edit files

hg add &lt;new files&gt;
hg commit -m &quot;1234 Bug description one-liner&quot;
webrev...
### (example webrev command-line from real-life is appreciated)
### repeat if more work on this bug is needed
</pre></div>

<div class="admonition warning">
<p>Dan: If you've just the one set of changes, "webrev" all by itself is sufficient. It'll create /code/illumos-bug1234/webrev/. You can then scp/mv/ln/etc. that webrev/ directory into an HTTP-reachable directory somewhere.</p>
</div>
<h2 id="after-some-work-in-the-child-workspace-you-need-to-pull-changes-from-upstream">After some work in the child workspace, you need to pull changes from upstream...<a class="headerlink" href="#after-some-work-in-the-child-workspace-you-need-to-pull-changes-from-upstream" title="Permanent link">&para;</a></h2>
<p>In particular, you must do this before completing your work to make the review or integration.</p>
<div class="codehilite"><pre><span></span>### Update master repo
cd /code/illumos-clone
hg pull -u
### Now illumos-clone is up to date.

### For each child like &quot;illumos-bug1234&quot;:
cd /code/illumos-bug1234
### Make sure I&#39;ve committed any outstanding diffs
hg pull -u ; hg merge
### Resolve conflicts if any
hg commit -m blah
hg recommit      ### &lt;edit push string to remove crap&gt;
</pre></div>

<h2 id="publish-your-work">Publish your work<a class="headerlink" href="#publish-your-work" title="Permanent link">&para;</a></h2>
<p>Developers' habits and best-practices "as-is":</p>
<div class="codehilite"><pre><span></span>Steve: I recommend to keep change sets  small.
Ideally, one bug, or concise feature per change set.
Rules are made to be broken, but there are many advantages: easier to review, easier to back out, easier for someone to take or leave.

&gt; I agree about this in terms of upstream repository, that an atomary
&gt; change to close a bug is a good thing. However, does it mean that
&gt; during local development I should not &quot;hg commit&quot; successful changes
&gt; to my code before I go on (as I often do, leading to several commits
&gt; per day)? Or are we talking about different things? =)

You could do that, but I find it is much simpler to stick to the &quot;one repo, one changeset, one bug, one commit, one push&quot; rule.  
Usually the checkin workflow for me goes like this:

Done with coding and testing...
Update repo with latest changes from parent, if any ( ie hg pull; hg update)
Merge if necessary (relatively rare)
hg commit
hg push
At this point the repo is ready for some other work item.

&gt;Anyway, publishing a webrev and reworking on comments, and making
&gt;new webrevs, would still likely produce several local commits.

&gt;From what I gathered around the docs, it is possible to diff your
&gt;repo against the upstream one, and produce a single changeset
&gt;which contains the final result of your work so far.

Change sets are produced by &quot;hg commit&quot;. These can be pushed (easily) to an upstream repo, and they remain change sets there as well.

You can produce a text diff rendering of any change set, e.g.:

hg diff -c xxxxx
(xxxxx being the change set number).
Also, see &quot;hg export&quot; and &quot;hg import&quot;. 

&gt;Also most docs value the &quot;local commit history&quot; (commit comments)
&gt;as being potentially useful to the developer and to the general
&gt;community after the upstream merge. How do these comments get
&gt;passed up and survive eventual destruction of the child repo
&gt;(if they do)?

Yes, comments are important, they make it easier for someone to discern what
the change set is about.  Comments added with -m &quot;..comment...&quot; at commit time
(or via a text editor, if you are so configured) are associated with the change
set, and travel with the change set as it gets pushed, exported and imported.

Again, once you commit and push the change set upstream, the comment goes with
it, so it does not matter if you subsequently destroy the repo where you did
the work.
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/illumos" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.495d10a2.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>